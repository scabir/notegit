#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

run_step() {
  label="$1"
  shift

  printf '%s\n' "--------------"
  printf '%s\n' "-- ${label} --"
  printf '%s\n' "--------------"
  "$@"
  printf '\n'
}

run_step "pnpm run clean" pnpm run clean
run_step "pnpm install" pnpm install
run_step "pnpm run format" pnpm run format
run_step "pnpm run format:check" pnpm run format:check
run_step "pnpm exec eslint --max-warnings=0" pnpm exec eslint . --ext .ts,.tsx --max-warnings=0
run_step "pnpm run build" pnpm run build
run_step "pnpm run test:coverage" pnpm run test:coverage
run_step "pnpm run coverage:check-staged" pnpm run coverage:check-staged
